stop('這位親愛的朋友，你的ID不是這個名字喔！')
# 遺漏值偵測
s.dc.missing_detector <- function(dataset, ID_name = 'ID', listout_col = NULL){
# 參數名稱定義
# dataset 要檢查遺漏值的dataset名稱
# ID_name ID不被納入檢測，以'字串'型態輸入
# listout_col 檢測過程中需列出參考的欄位，以c('', '')輸入
if (ID_name %in% colnames(dataset)){
if (is.null(listout_col)){
listout_col <- colnames(dataset)
}
DT <- dataset
for (colName in colnames(DT)[-which(colnames(DT) == ID_name)]){
print(colName)
typeis <- class(DT[, ..colName][[1]])
if (typeis %in% c('integer', 'numeric')){
missDT <- DT[is.na(DT[, ..colName][[1]]) == TRUE, ..listout_col]
}else{
if (dim(DT[DT[, ..colName][[1]] == '', ])[1] != 0){
missDT <- DT[DT[, ..colName][[1]] == '', ..listout_col]
}else{
missDT <- DT[is.na(DT[, ..colName][[1]]) == TRUE, ..listout_col]
}
}
if (dim(missDT)[1] != 0){
print(missDT)
}
missing.ratio <- (dim(missDT)[1]/dim(DT)[1]) * 100
cat('變數', colName, '中含有', missing.ratio, '%的遺漏值')
if (missing.ratio > 50){
cat('遺漏值比例超過50%，建議刪除')
}
cat('\n\n')
}
}else{
stop('這位親愛的朋友，你的ID不是這個名字喔！')
}
}
s.dc.missing_detector
# s.mike ----
# 偷懶用簡單function
s.mike.rm <- function(){
rm(list = ls())
gc()
}
s.mike.rm
s.mike.rm()
?round
include_pt
missing_count <- 0
?round
# install.packages(c('devtools', 'data.table'))
library(devtools)
# devtools::install_github('Steven-CYCH/CYCHpackage')
library(CYCHpackage)
library(data.table)
# 建立模擬資料集
dataset <- as.data.table(data.frame(
ID = paste0('S', sprintf("%03d", 1:100)),
conA = sample(c(round(rnorm(95, mean = 5, sd = 1)), c(100, -100), rep(NA, 3))),
factorB = factor(sample(c(sample(c('A', 'B', 'C'), 90, replace = TRUE), rep('', 10))))
))
# 預設值結果
# 3倍標準差以外的觀察值為離群值(sig_num = 3)
# 遺漏值樣本ID不列出(NA_obs_out = FALSE)
s.dc.outlier_detector(DT = dataset)
# 4倍標準差以外的觀察值為離群值(sig_num = 4)
# 遺漏值樣本ID不列出(NA_obs_out = TRUE)
s.dc.outlier_detector(DT = dataset, sig_num = 4, NA_obs_out = TRUE)
detach("package:CYCHpackage", unload = TRUE)
remove.packages("CYCHpackage", lib="C:/Users/15334/AppData/Local/R/cache/R/renv/sandbox/R-4.3/x86_64-w64-mingw32/1e360f03")
devtools::install_github('Steven-CYCH/CYCHpackage')
# install.packages(c('devtools', 'data.table'))
library(devtools)
# devtools::install_github('Steven-CYCH/CYCHpackage')
library(CYCHpackage)
library(data.table)
# 建立模擬資料集
dataset <- as.data.table(data.frame(
ID = paste0('S', sprintf("%03d", 1:100)),
conA = sample(c(round(rnorm(95, mean = 5, sd = 1)), c(100, -100), rep(NA, 3))),
factorB = factor(sample(c(sample(c('A', 'B', 'C'), 90, replace = TRUE), rep('', 10))))
))
# 預設值結果
# 3倍標準差以外的觀察值為離群值(sig_num = 3)
# 遺漏值樣本ID不列出(NA_obs_out = FALSE)
s.dc.outlier_detector(DT = dataset)
# 4倍標準差以外的觀察值為離群值(sig_num = 4)
# 遺漏值樣本ID不列出(NA_obs_out = TRUE)
s.dc.outlier_detector(DT = dataset, sig_num = 4, NA_obs_out = TRUE)
gc()
# install.packages(c('devtools', 'data.table'))
library(devtools)
# devtools::install_github('Steven-CYCH/CYCHpackage')
library(CYCHpackage)
library(data.table)
# 建立模擬資料集
dataset <- as.data.table(data.frame(
ID = paste0('S', sprintf("%03d", 1:100)),
conA = sample(c(round(rnorm(95, mean = 5, sd = 1)), c(100, -100), rep(NA, 3))),
factorB = factor(sample(c(sample(c('A', 'B', 'C'), 90, replace = TRUE), rep('', 10))))
))
s.dc.missing_detector
s.dc.missing_detector(DT = dataset)
s.dc.missing_detector(DT = dataset, NA_obs_out = TRUE)
